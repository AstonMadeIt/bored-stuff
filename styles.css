/* ===== Root theme variables ===== */
:root {
  /* Light defaults */
  --bg:#faf9f7; --fg:#2a2826; --fg-muted:#7a7876;
  --story-bg:#fff; --story-ink:#1a1816; --story-sub:#5a5856;
  --accent:#ff6b9d; --accent-hover:#ff8fb3;

  --pad:clamp(16px,4vw,60px); --max-width:1400px; --content-width:65ch;
  --space-xs:clamp(8px,2vw,16px);
  --space-sm:clamp(12px,3vw,24px);
  --space-md:clamp(20px,4vw,40px);
  --space-lg:clamp(32px,6vw,80px);
  --space-xl:clamp(48px,10vw,140px);
  --space-2xl:clamp(80px,15vw,200px);

  /* Series colors */
  --c-tradwife:#e89b78; --c-measles:#d47c7c; --c-unemployment:#7a9bc4;
  --c-eggs:#7ac4d8; --c-gold:#c4a478; --c-beef:#9c6c5c;

  /* Header / controls */
  --header-bg:#fff;
  --header-border:rgba(0,0,0,.08);
  --brand:#1d1d1f;
  --pill-bg:rgba(255,107,157,0.06);
  --pill-border:rgba(255,107,157,0.12);
  --pill-bg-active:rgba(255,107,157,0.15);
  --pill-border-active:rgba(255,107,157,0.25);

  /* TikTok card */
  --ttk-bg:#000;
  --poster-focus:#000;
}

/* ===== Dark theme overrides ===== */
html[data-theme="dark"] {
  --bg:#0a0a0a; --fg:#e5e5e5; --fg-muted:#9c9c9c;
  --story-bg:rgba(255,255,255,0.02);
  --story-ink:#fff; --story-sub:#a8a8a8;

  --header-bg:rgba(10,10,10,0.8);
  --header-border:rgba(255,255,255,0.08);
  --brand:#fff;

  --pill-bg:rgba(255,255,255,0.06);
  --pill-border:rgba(255,255,255,0.12);
  --pill-bg-active:rgba(255,255,255,0.14);
  --pill-border-active:rgba(255,255,255,0.24);

  --ttk-bg:#000;
  --poster-focus:#111;
}

/* ===== Resets & base ===== */
*{ box-sizing:border-box; margin:0; padding:0; }
html{
  font-size:16px; scroll-behavior:smooth;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  text-size-adjust:100%;
}
body{
  background:var(--bg); color:var(--fg);
  font-family:'Space Grotesk', -apple-system, system-ui, sans-serif;
  line-height:1.6; overflow-x:hidden; min-height:100vh;
  padding-bottom:env(safe-area-inset-bottom, 0);
  cursor: none; position: relative;
}

/* Film-grain / grit */
.bg-grit,.bg-paper,.bg-vignette{ position:fixed; inset:0; pointer-events:none; }
.bg-grit{ opacity:.12; mix-blend-mode:overlay; background-size:800px; background-repeat:repeat;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="g"><feTurbulence baseFrequency="1.5" numOctaves="4"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23g)" opacity="0.15"/></svg>');
}
.bg-paper{ opacity:.04; mix-blend-mode:multiply; background-size:1000px; background-repeat:repeat;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400"><filter id="p"><feTurbulence baseFrequency=".04" numOctaves="3" seed="15"/><feDisplacementMap scale="10"/></filter><rect width="100%" height="100%" fill="%23fff" filter="url(%23p)" opacity=".4"/></svg>');
}
.bg-vignette{ background:radial-gradient(ellipse,transparent 0%,transparent 60%,rgba(0,0,0,.25) 100%); }

/* Custom cursor */
#custom-cursor{ position:fixed; width:20px; height:20px; border:2px solid var(--accent); border-radius:50%;
  pointer-events:none; z-index:9999; transition:transform .15s ease, opacity .15s ease; mix-blend-mode:multiply; opacity:.6; }
#custom-cursor.hover{ transform:scale(2); border-color:var(--accent-hover); opacity:.8; }

/* Loader */
#loader{ position:fixed; inset:0; background:#000; z-index:10000; display:flex; align-items:center; justify-content:center; flex-direction:column; opacity:1; transition:opacity .8s ease; }
#loader.hidden{ opacity:0; pointer-events:none; }
.loader-text{ font-size:clamp(1.5rem,5vw,3rem); font-weight:800; letter-spacing:-.02em; margin-bottom:2rem;
  background:linear-gradient(90deg, var(--accent), var(--accent-hover), var(--accent)); background-size:200% 100%;
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; animation:shimmer 2s ease-in-out infinite; }
@keyframes shimmer{ 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
.loader-bar{ width:200px; height:4px; background:rgba(255,255,255,.1); border-radius:2px; overflow:hidden; }
.loader-progress{ height:100%; background:linear-gradient(90deg, var(--accent), var(--accent-hover)); width:0%; transition:width .3s ease; }

/* Progress bar */
.progress-bar{ position:fixed; top:0; left:0; height:3px; background:linear-gradient(90deg, var(--accent), var(--accent-hover));
  z-index:200; transform-origin:left; transform:scaleX(0); will-change:transform; }

/* Header */
header{
  position:fixed; top:0; left:0; right:0; z-index:100; display:flex; align-items:center; justify-content:space-between;
  padding:max(16px, env(safe-area-inset-top)) var(--pad) 16px var(--pad); background:var(--header-bg); border-bottom:1px solid var(--header-border);
}
header::before{ content:''; position:absolute; bottom:-3px; left:0; right:0; height:3px;
  background:linear-gradient(90deg,#ffd166 0%,#ff8fab 25%,#ffb5e8 50%,#b4d4ff 75%,#c4a5ff 100%); opacity:.6; }
.brand{ font-weight:700; font-size:clamp(14px,3vw,18px); letter-spacing:.05em; text-transform:uppercase; color:var(--brand); }

/* Controls */
.header-controls{ display:flex; align-items:center; gap:12px; }

/* Theme radio (1% pill) */
.theme-toggle{ display:flex; gap:6px; border:0; padding:0; margin:0; }
.theme-pill{ display:flex; align-items:center; gap:6px; padding:6px 12px; border:1px solid var(--pill-border); border-radius:18px;
  background:var(--pill-bg); font-size:11px; font-weight:700; letter-spacing:.02em; text-transform:uppercase; cursor:pointer; user-select:none; }
.theme-pill input{ appearance:none; width:10px; height:10px; border-radius:50%; border:2px solid currentColor; display:inline-block; position:relative; }
.theme-pill input:checked{ background:currentColor; }
.theme-pill:hover{ transform:translateY(-1px); transition:transform .2s ease; }
.theme-pill:has(input:checked){ background:var(--pill-bg-active); border-color:var(--pill-border-active); }

/* Music */
.music-toggle{ background:var(--pill-bg); border:1px solid var(--pill-border); border-radius:18px; padding:6px 14px; font-size:11px; font-weight:600;
  letter-spacing:.02em; text-transform:uppercase; color:var(--brand); cursor:pointer; transition:all .2s ease; display:flex; align-items:center; gap:6px; }
.music-toggle.active{ background:var(--pill-bg-active); border-color:var(--pill-border-active); color:var(--accent); }
.volume-control{ display:flex; align-items:center; gap:8px; opacity:0; pointer-events:none; transition:opacity .3s ease; }
.volume-control.visible{ opacity:1; pointer-events:all; }
.volume-slider{ appearance:none; width:70px; height:3px; background:var(--pill-border); border-radius:1.5px; cursor:pointer; }
.volume-slider::-webkit-slider-thumb{ appearance:none; width:12px; height:12px; background:var(--accent); border-radius:50%; box-shadow:0 1px 3px rgba(0,0,0,.15); }

/* Main */
main{ position:relative; z-index:10; min-height:100vh; padding:calc(80px + var(--space-lg)) var(--pad) var(--space-xl); }
.container{ max-width:var(--max-width); margin:0 auto; }

/* Hero */
.hero{ min-height:clamp(500px,80vh,700px); display:flex; flex-direction:column; justify-content:center; padding:var(--space-xl) 0; margin-bottom:var(--space-2xl); }
.hero-title{ font-weight:600; font-size:clamp(2.8rem,10vw,7rem); line-height:1.05; letter-spacing:-.02em; margin-bottom:var(--space-md);
  max-width:var(--content-width); margin-inline:auto; text-align:center; color:var(--fg); text-shadow:0 0 30px rgba(0,0,0,.08);}
.holo{ background:linear-gradient(135deg,#667eea 0%,#764ba2 25%,#f093fb 50%,#667eea 75%,#764ba2 100%); background-size:200% 200%;
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; animation:holo 8s ease infinite; }
@keyframes holo{ 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
.hero-subtitle{ font-size:clamp(1.05rem,3.8vw,1.5rem); color:var(--fg-muted); max-width:var(--content-width); margin-inline:auto; text-align:center; }

/* Voice Moments, Press Cards, Story Cards (preserved) */
.press{ max-width:900px; margin:0 auto var(--space-2xl) auto; }
.press-card{ background:var(--story-bg); border:1px solid var(--header-border); border-radius:clamp(16px,3vw,24px);
  box-shadow:0 8px 32px rgba(0,0,0,.04), 0 2px 8px rgba(0,0,0,.02), inset 0 1px 0 rgba(255,255,255,.9); }
.press-card--video{ max-width:600px; margin:0 auto; }
.press-toprule{ height:4px; background:linear-gradient(90deg,#ff6b6b,#4ecdc4,#45b7d1); }
.press-link{ display:flex; padding:24px; color:inherit; text-decoration:none; justify-content:space-between; align-items:center; gap:24px; }
.press-kicker{ font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:.05em; color:var(--fg-muted); margin-bottom:8px; }
.press-headline{ font-size:20px; font-weight:600; line-height:1.3; margin:0 0 8px; color:var(--story-ink); }
.press-dek{ font-size:14px; line-height:1.5; color:var(--story-sub); margin:0 0 12px; }
.press-meta{ display:flex; align-items:center; gap:8px; font-size:12px; color:var(--fg-muted); }
.press-dot{ width:3px; height:3px; background:currentColor; border-radius:50%; }
.press-cta{ display:flex; align-items:center; gap:8px; color:var(--story-ink); font-size:14px; font-weight:500; white-space:nowrap; }

/* Voice moment */
.voice-moment{ max-width:var(--content-width); margin:var(--space-2xl) auto; padding:var(--space-lg) var(--space-md);
  background:linear-gradient(135deg, rgba(255,107,157,0.04) 0%, rgba(255,143,179,0.06) 100%); border-left:3px solid var(--accent); border-radius:12px; }
.voice-label{ font-size:.75rem; font-weight:700; letter-spacing:.12em; text-transform:uppercase; color:var(--accent); margin-bottom:.75rem; }
.voice-text{ font-family:'Inter', sans-serif; font-size:clamp(1rem,3vw,1.15rem); color:var(--fg); }

/* Story card */
.story-card{ padding:clamp(40px,7vw,70px) clamp(32px,6vw,60px); margin:0 0 calc(var(--space-xl)*1.5) 0; background:var(--story-bg);
  border-radius:clamp(16px,3vw,24px); border:1px solid var(--header-border); }
.story-header{ border-bottom:1.5px solid var(--story-ink); padding-bottom:var(--space-md); margin-bottom:var(--space-lg); max-width:var(--content-width); margin-inline:auto; }
.story-kicker{ font-size:clamp(10px,2.2vw,12px); font-weight:700; letter-spacing:.14em; text-transform:uppercase; color:var(--story-sub); }
.story-title{ font-weight:700; font-size:clamp(2.2rem,7vw,4.8rem); line-height:1.02; letter-spacing:-.02em; margin-bottom:var(--space-sm); color:var(--story-ink); }
.story-subtitle{ font-size:clamp(.95rem,3vw,1.15rem); line-height:1.55; color:var(--story-sub); }
.story-byline{ font-size:.85rem; color:#8a8d93; margin-top:10px; }
.story-lede{ color:var(--fg); font-size:clamp(1.05rem,3.5vw,1.25rem); line-height:1.7; margin:var(--space-lg) auto var(--space-xl) auto; max-width:var(--content-width); }
.story-chart{ width:100%; min-height:clamp(600px,80vh,900px); max-height:1000px; margin:var(--space-xl) 0; }
.story-notes{ background:rgba(0,0,0,.04); border-left:3px solid var(--story-ink); padding:clamp(16px,3vw,20px); margin:var(--space-lg) auto var(--space-md) auto; max-width:var(--content-width); }

/* Back to top */
.back-to-top{ position:fixed; bottom:40px; right:40px; width:56px; height:56px; border-radius:50%; background:rgba(255,107,157,.85); border:none; cursor:pointer;
  z-index:150; opacity:0; pointer-events:none; transition:all .4s cubic-bezier(.16,1,.3,1); box-shadow:0 4px 20px rgba(255,107,157,.2); }
.back-to-top.visible{ opacity:1; pointer-events:all; }
.progress-ring{ position:absolute; top:0; left:0; width:56px; height:56px; transform:rotate(-90deg); }
.progress-ring-circle{ fill:none; stroke:rgba(255,255,255,.3); stroke-width:3; }
.progress-ring-progress{ fill:none; stroke:#fff; stroke-width:3; stroke-linecap:round; transition:stroke-dashoffset .1s linear; }
.back-to-top-arrow{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:24px; height:24px; stroke:#fff; stroke-width:2; fill:none; }

/* Mobile tweaks */
@media (max-width:768px){
  body{ cursor:auto; }
  #custom-cursor{ display:none; }
  header{ padding:max(12px, env(safe-area-inset-top)) 20px 12px 20px; }
  .music-toggle{ padding:6px 12px; font-size:10px; }
  .volume-slider{ width:50px; }
  .back-to-top{ bottom:24px; right:24px; width:48px; height:48px; }
  .progress-ring{ width:48px; height:48px; }
}

/* ===== World-class TikTok embed ===== */
.ttk{ max-width:420px; margin:0 auto 12px; background:var(--ttk-bg); border-radius:8px; overflow:hidden; contain:layout style paint; position:relative; }
.ttk__poster{ display:block; position:relative; width:100%; aspect-ratio:9/16; border:none; padding:0; cursor:pointer; background:var(--poster-focus); overflow:hidden; }
.ttk__poster:focus-visible{ outline:2px solid #fff; outline-offset:2px; }
.ttk__poster-img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
.ttk__play{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:60px; height:60px;
  background:rgba(0,0,0,.7); backdrop-filter:blur(10px); border:2px solid rgba(255,255,255,.9); border-radius:50%;
  display:flex; align-items:center; justify-content:center; font-size:24px; color:#fff; transition:all .2s ease; }
.ttk__poster:hover .ttk__play{ transform:translate(-50%,-50%) scale(1.08); background:rgba(0,0,0,.85); }

.ttk__frame{ position:relative; width:100%; aspect-ratio:9/16; background:#000; overflow:hidden; }
.ttk__frame > iframe{
  position:absolute; inset:0; width:100% !important; height:100% !important; border:0;
  overflow:hidden !important; overscroll-behavior:none !important; -webkit-overflow-scrolling:auto !important; touch-action:manipulation;
  scrollbar-width:none !important; -ms-overflow-style:none !important; will-change:transform; transform:translateZ(0); backface-visibility:hidden; perspective:1000px;
}
.ttk__frame > iframe::-webkit-scrollbar{ display:none !important; width:0 !important; height:0 !important; }
.ttk__error{ padding:40px 20px; text-align:center; color:#999; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .ttk__frame > iframe{ animation:none !important; transition:none !important; }
  .ttk__play,.ttk__poster{ transition:none; }
}
